<app-header></app-header>

<div class="container">
  <h1>Change Password</h1>

  <div class="card">
    <h2>Personal Information</h2>
    <p class="muted">Full Name: {{ firstName() }} {{ lastName() }}</p>
    <p class="muted">Email: {{ email() }}</p>
  </div>

  <div class="card">
    <h2>Update Password</h2>
    <p class="muted">Enter your current password and a new password to update.</p>

    <form (ngSubmit)="changePassword()" novalidate>
      <!-- Current password -->
      <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <div class="input-wrap">
          <input
            class="input"
            [type]="showCurrent ? 'text' : 'password'"
            id="currentPassword"
            name="currentPassword"
            [(ngModel)]="currentPassword"
            required
            autocomplete="current-password"
            [attr.aria-invalid]="currentPasswordError() ? 'true' : 'false'"
          />
          <button type="button" class="toggle-visibility" (click)="showCurrent = !showCurrent">
            {{ showCurrent ? 'Hide' : 'Show' }}
          </button>
        </div>
        <div class="error" *ngIf="currentPasswordError()">{{ currentPasswordError() }}</div>
      </div>

      <!-- New password -->
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <div class="input-wrap">
          <input
            class="input"
            [type]="showNew ? 'text' : 'password'"
            id="newPassword"
            name="newPassword"
            [(ngModel)]="newPassword"
            required
            minlength="8"
            autocomplete="new-password"
            [attr.aria-invalid]="newPasswordError() ? 'true' : 'false'"
          />
          <button type="button" class="toggle-visibility" (click)="showNew = !showNew">
            {{ showNew ? 'Hide' : 'Show' }}
          </button>
        </div>
        <div class="helper">At least 8 characters.</div>
        <div class="error" *ngIf="newPasswordError()">{{ newPasswordError() }}</div>
      </div>

      <!-- Confirm password -->
      <div class="form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <div class="input-wrap">
          <input
            class="input"
            [type]="showConfirm ? 'text' : 'password'"
            id="confirmPassword"
            name="confirmPassword"
            [(ngModel)]="confirmPassword"
            required
            minlength="8"
            autocomplete="new-password"
            [attr.aria-invalid]="confirmPasswordError() ? 'true' : 'false'"
          />
          <button type="button" class="toggle-visibility" (click)="showConfirm = !showConfirm">
            {{ showConfirm ? 'Hide' : 'Show' }}
          </button>
        </div>
        <div class="error" *ngIf="confirmPasswordError()">{{ confirmPasswordError() }}</div>
      </div>

      <div class="form-actions">
        <button class="btn dark" type="submit" [disabled]="saving || !isFormValid()">
          {{ saving ? 'Changingâ€¦' : 'Change Password' }}
        </button>

        <button class="btn light" type="button" (click)="backHome()">Back to Home</button>
      </div>
    </form>
  </div>
</div>
